DROP TABLE IF EXISTS GERE;
DROP TABLE IF EXISTS TRABALHA;
DROP TABLE IF EXISTS FUNCIONARIO;
DROP TABLE IF EXISTS EMPRESA;
DROP TABLE IF EXISTS EMPRESA_NR;


CREATE TABLE FUNCIONARIO (
	NOME_FUNC VARCHAR(20),
	RUA VARCHAR(20),
	CIDADE VARCHAR(20),
	CONSTRAINT PK_FUNCIONARIO_NOME_FUNC PRIMARY KEY(NOME_FUNC));


CREATE TABLE EMPRESA (
	NOME_EMP VARCHAR(30),
	CIDADE VARCHAR(20),
	CONSTRAINT PK_EMPRESA_NOME_EMP PRIMARY KEY(NOME_EMP));


CREATE TABLE TRABALHA (
	NOME_FUNC VARCHAR(20),
	NOME_EMP VARCHAR(30),
	SALARIO NUMERIC(8,2) CONSTRAINT NN_TRABALHA_SALARIO NOT NULL,
	CONSTRAINT PK_TRABALHA_NOME_FUNC PRIMARY KEY (NOME_FUNC),
	CONSTRAINT FK_TRABALHA2FUNCIONARIO FOREIGN KEY (NOME_FUNC) REFERENCES FUNCIONARIO,
	CONSTRAINT FK_TRABALHA2EMPRESA FOREIGN KEY (NOME_EMP) REFERENCES EMPRESA,
	CONSTRAINT CK_TRABALHA_SALARIO CHECK (SALARIO > 0));


CREATE TABLE GERE (
	NOME_FUNC VARCHAR(20),
	NOME_GESTOR VARCHAR(20),
	CONSTRAINT PK_GERE_NOME_FUNC PRIMARY KEY (NOME_FUNC),
	CONSTRAINT FK_GERE_NOME_FUNC2FUNCIONARIO FOREIGN KEY (NOME_FUNC) REFERENCES FUNCIONARIO,
	CONSTRAINT FK_GERE_NOME_GESTOR2FUNCIONARIO FOREIGN KEY (NOME_GESTOR) REFERENCES FUNCIONARIO);


CREATE TABLE EMPRESA_NR (
  NOME_EMP  VARCHAR(30),
  CIDADE          VARCHAR(20));

-- INSERTions

INSERT INTO FUNCIONARIO VALUES ('Maria', 'Rua 1', 'Lisboa');
INSERT INTO FUNCIONARIO VALUES ('Manuel', 'Rua 2', 'Lisboa');
INSERT INTO FUNCIONARIO VALUES ('José', 'Rua 3', 'Aveiro');
INSERT INTO FUNCIONARIO VALUES ('João', 'Rua 1', 'Lisboa');
INSERT INTO FUNCIONARIO VALUES ('António', 'Rua 4', 'Porto');
INSERT INTO FUNCIONARIO VALUES ('Joana', 'Rua 5', 'Lisboa');
INSERT INTO FUNCIONARIO VALUES ('Vaso', 'Rua 1', 'Porto');
INSERT INTO FUNCIONARIO VALUES ('Isabel', 'Rua 1', 'Porto');
INSERT INTO FUNCIONARIO VALUES ('Pedro', 'Rua 1', 'Lisboa');
INSERT INTO FUNCIONARIO VALUES ('Ana', 'Rua 6', 'Lisboa');
INSERT INTO FUNCIONARIO VALUES ('Francisco', 'Rua 23', 'Faro');

INSERT INTO EMPRESA VALUES ('HR', 'Lisboa');
INSERT INTO EMPRESA VALUES ('UALG', 'Lisboa');
INSERT INTO EMPRESA VALUES ('MGMT', 'Porto');
INSERT INTO EMPRESA VALUES ('XPTO', 'Coimbra');

INSERT INTO TRABALHA VALUES ('Maria', 'UALG', 20000);
INSERT INTO TRABALHA VALUES ('Manuel', 'XPTO', 3000);
INSERT INTO TRABALHA VALUES ('José', 'UALG', 5000);
INSERT INTO TRABALHA VALUES ('João', 'MGMT', 6000);
INSERT INTO TRABALHA VALUES ('Ana', 'XPTO', 4000);
INSERT INTO TRABALHA VALUES ('António', 'UALG', 15000);
INSERT INTO TRABALHA VALUES ('Joana', 'HR', 11000);
INSERT INTO TRABALHA VALUES ('Isabel', 'XPTO', 14000);
INSERT INTO TRABALHA VALUES ('Pedro', 'UALG', 12000);
INSERT INTO TRABALHA VALUES ('Francisco', 'HR', 22000);

INSERT INTO GERE VALUES ('Manuel', 'Maria');
INSERT INTO GERE VALUES ('Pedro', 'Maria');
INSERT INTO GERE VALUES ('José', 'Maria');
INSERT INTO GERE VALUES ('João', 'Isabel');


INSERT INTO EMPRESA_NR VALUES ('XPTO', 'Coimbra');
INSERT INTO EMPRESA_NR VALUES ('XPTO', 'Porto');
INSERT INTO EMPRESA_NR VALUES ('C1', 'Coimbra');
INSERT INTO EMPRESA_NR VALUES ('C2', 'Porto');
INSERT INTO EMPRESA_NR VALUES ('C3', 'Coimbra');
INSERT INTO EMPRESA_NR VALUES ('C3', 'Porto');
INSERT INTO EMPRESA_NR VALUES ('C4', 'Coimbra');
INSERT INTO EMPRESA_NR VALUES ('C4', 'Porto');
INSERT INTO EMPRESA_NR VALUES ('C4', 'Lisboa');